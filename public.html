<!DOCTYPE html>
<html>
<head>
  <title>Lead Submission</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>

<h2>Sales Enquiry</h2>

<input id="name" placeholder="Name"><br>
<input id="email" placeholder="Email"><br>
<input id="company" placeholder="Company"><br>
<input id="value" type="number" placeholder="Estimated Value"><br>
<textarea id="message" placeholder="Message"></textarea><br>
<button onclick="submitLead()">Submit</button>

<p id="status"></p>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyAOlXmtbxpPQtB7tZJAW7mo448QMJ4Pn_4",
  authDomain: "mini-crm-9083a.firebaseapp.com",
  projectId: "mini-crm-9083a",
  storageBucket: "mini-crm-9083a.firebasestorage.app",
  messagingSenderId: "529154007688",
  appId: "1:529154007688:web:9a6c18a9c6668a38c7753d"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

function submitLead() {
  const lead = {
    name: name.value,
    email: email.value,
    company: company.value,
    value: Number(value.value),
    message: message.value,
    stage: "New",
    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
    notes: ""
  };

  db.collection("leads").add(lead)
    .then(() => status.innerText = "Lead submitted successfully")
    .catch(err => status.innerText = err.message);
}
</script>

</body>
</html>
